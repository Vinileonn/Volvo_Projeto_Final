RELATORIO GERAL DE ALTERACOES

1) Padronizacao e idioma
- Ajustes de textos e comentarios para portugues, incluindo menus e exibicoes.
- Guard de Console.Clear quando a saida esta redirecionada.
Arquivos: cineflow/utilitarios/MenuHelper.cs, cineflow/visualizacao/*

2) Novos enums e conceitos
- TipoSala com VIP e QuatroD.
- CategoriaProduto com Tematico, Brinde, Poster e Cortesia.
- CargoFuncionario com Garcom e Gerente.
- TipoSessao com PreEstreia, EspecialBebe, EspecialPet, Matine e Evento.
- StatusAluguel, IdiomaSessao e ClassificacaoIndicativa.
Arquivos: cineflow/enumeracoes/TipoSala.cs, CategoriaProduto.cs, CargoFuncionario.cs,
          TipoSessao.cs, StatusAluguel.cs, IdiomaSessao.cs, ClassificacaoIndicativa.cs

3) Modelos atualizados e novos
- ProdutoAlimento com flags de tematico, cortesia e exclusividade de pre-estreia.
- Sessao com tipo, idioma, parceiro e nome de evento.
- Cliente com pontos de fidelidade, cortesia e verificacoes de aniversario.
- Ingresso com reserva antecipada, check-in e pontos.
- PedidoAlimento com descontos, pontos e taxa de cancelamento.
- Assento com marcador preferencial.
- Filme com classificacao indicativa.
- AluguelSala para locacao de sala e pacote aniversario.
Arquivos: cineflow/modelos/ProdutoAlimento.cs, Sessao.cs, Cliente.cs, Ingresso.cs,
          PedidoAlimento.cs, Assento.cs, Filme.cs, AluguelSala.cs

4) Servicos e regras de negocio
- Regras de preco por tipo de sala e sessao (VIP/4D/pre-estreia/evento).
- Descontos por aniversario do cliente com regra por tipo de sala.
- Cupom de parceria, taxa de reserva e preferenciais.
- Fidelidade (acumulo e uso de pontos) em ingresso e pedido.
- Check-in e politica de cancelamento.
- Alertas de estoque para produtos.
- Aluguel de sala com precificacao automatica e pacote aniversario.
Arquivos: cineflow/servicos/SessaoServico.cs, IngressoServico.cs, PedidoAlimentoServico.cs,
          ProdutoAlimentoServico.cs, AluguelSalaServico.cs, FilmeServico.cs

5) Controladores
- Fluxos para pontos, reserva, cupom, check-in e cortesia pre-estreia.
- Aluguel de sala com validacoes e cancelamento.
- Atualizacoes de sessao, produtos e filmes com novos campos.
Arquivos: cineflow/controladores/ClienteControlador.cs, PedidoControlador.cs,
          SessaoControlador.cs, ProdutoControlador.cs, FilmeControlador.cs,
          AluguelSalaControlador.cs

6) Menus e visualizacao
- Novas opcoes de cliente: pontos, cortesias, check-in, carrinho, aluguel.
- Tabelas com colunas de idioma, classificacao, tipo de sessao e descontos.
- Menus de produtos com tematicos/cortesias e alertas de estoque.
- Menu de aluguel e exibicao de alugueis.
Arquivos: cineflow/visualizacao/MenuCliente.cs, MenuSessoes.cs, MenuProdutos.cs,
          MenuFilmes.cs, MenuRelatorios.cs, MenuPedidos.cs, MenuAlugueis.cs,
          MenuAdmin.cs, MenuPrincipal.cs

7) Dados iniciais
- Seed com salas VIP e QuatroD, produtos tematicos/cortesias, sessoes especiais,
  classificacao indicativa e idioma.
Arquivo: cineflow/Program.cs

8) Utilitarios
- Geracao de lugares com assentos preferenciais.
Arquivo: cineflow/utilitarios/GeradorDeLugares.cs

CHECKLIST DE MIGRACAO PARA API REST (CINEFLOW)

1) Criar projeto Web API
[ ] Criar projeto ASP.NET Core Web API no repositorio (ex: cineflow-api/)
[ ] Manter o console separado ou mover para pasta legacy/

2) Modelagem e EF Core
[ ] Criar DbContext e entidades principais: Filme, Sala, Sessao, Ingresso
[ ] Definir relacionamentos e chaves (FKs)
[ ] Adicionar EF Core SQL Server e configurar connection string
[ ] Criar migrations e executar Update-Database

3) Controllers REST
[ ] FilmesController (CRUD completo)
[ ] SalasController (CRUD completo)
[ ] SessoesController (CRUD + validacao de conflito de horario)
[ ] IngressosController (venda + checagem de lotacao)
[ ] Status codes corretos (200/201/400/404/409)

4) Regras de negocio
[ ] Bloquear sessao com intersecao de horarios na mesma sala
[ ] Impedir venda se a sessao estiver lotada
[ ] Validacoes de entrada (DTOs + DataAnnotations)

5) Endpoints de desafio (LINQ/SQL)
[ ] GET /cartaz: filmes com sessoes nos proximos 7 dias
[ ] GET /ocupacao: taxa de ocupacao por sala (vendidos/capacidade)

6) Swagger
[ ] Swagger habilitado com exemplos e descricoes
[ ] Testar todos endpoints pelo Swagger

7) README e diagrama do banco
[ ] Incluir diagrama das tabelas (draw.io ou similar)
[ ] Documentar como rodar a API e configurar o banco

9) MIGRACAO SESSAOSERVICO PARA CINECORE
[✓] Criadas classes de exceção em cinecore: DadosInvalidosExcecao, OperacaoNaoPermitidaExcecao, RecursoNaoEncontradoExcecao
[✓] Adicionado método RecalcularPreco() ao modelo Sessao em cinecore
[✓] Criado SessaoServico em cinecore/servicos com todas as funcionalidades de cineflow
[✓] Criados DTOs para Sessão: SessaoDto, CriarSessaoDto, AtualizarSessaoDto
[✓] Criado SessaoMappingProfile para mapeamento de DTOs
[✓] Criado SessaoControlador REST seguindo padrão de FilmeControlador
[✓] Registrado SessaoServico no Program.cs como Singleton
[✓] AutoMapper configurado automaticamente para registrar SessaoMappingProfile

Arquivos criados:
- cinecore/excecoes/DadosInvalidosExcecao.cs
- cinecore/excecoes/OperacaoNaoPermitidaExcecao.cs
- cinecore/excecoes/RecursoNaoEncontradoExcecao.cs
- cinecore/servicos/SessaoServico.cs
- cinecore/DTOs/SessaoDto.cs
- cinecore/DTOs/CriarSessaoDto.cs
- cinecore/DTOs/AtualizarSessaoDto.cs
- cinecore/Mappings/SessaoMappingProfile.cs
- cinecore/controladores/SessaoControlador.cs

Arquivos modificados:
- cinecore/modelos/Sessao.cs (adicionado método RecalcularPreco)
- cinecore/Program.cs (registrado SessaoServico)

[ ] Informar rotas principais e exemplos de payload

8) Qualidade e organizacao
[ ] Separar pastas: Controllers, Models, Services, Data, DTOs
[ ] Injecao de dependencia no Program.cs
[ ] Padronizar nomenclatura e tratar erros com respostas claras
10) MIGRACAO CINEMASERVICO DE CINEFLOW PARA CINECORE
Data: 08/02/2026
[✓] Criado CinemaServico em cinecore/servicos adaptando logica de cineflow
    - Usa padrão de exceções padrão (.NET) em vez de exceções customizadas
    - Implementa métodos: CriarCinema, ObterCinema, ListarCinemas, BuscarPorNome, AtualizarCinema, DeletarCinema
    - Adicionados métodos complementares: ObterSalasDoCinema, ObterFuncionariosDoCinema
    - Validações robustas com métodos privados de validação
[✓] DTOs já existentes e configurados:
    - cinecore/DTOs/Cinema/CinemaDto.cs
    - cinecore/DTOs/Cinema/CriarCinemaDto.cs
    - cinecore/DTOs/Cinema/AtualizarCinemaDto.cs
[✓] Mapeamento AutoMapper já existente:
    - cinecore/Mappings/CinemaMappingProfile.cs
[✓] Criado CinemaControlador em cinecore/controladores seguindo padrão REST
    - Endpoints: POST /criar, GET, GET /obter/{id}, GET /buscar, PUT /atualizar/{id}, DELETE /deletar/{id}
    - Endpoints adicionais: GET /{id}/salas, GET /{id}/funcionarios
    - Tratamento de exceções e status codes apropriados (201, 400, 404, 409)
[✓] Registrado CinemaServico no Program.cs como Singleton
[✓] Adicionados endpoints de teste em cinecore.cinecore.http para validação

Arquivos criados:
- cinecore/servicos/CinemaServico.cs
- cinecore/controladores/CinemaControlador.cs

Arquivos modificados:
- cinecore/Program.cs (registrado CinemaServico)
- cinecore/cinecore.http (adicionados testes para Cinema endpoints)

Proximos passos (opcional):
[ ] Remover CinemaServico de cineflow se não for mais necessário
[ ] Migrar CinemaControlador de cineflow para cinecore se houver dependências
[ ] Integrar banco de dados Entity Framework quando disponível
[ ] Adicionar autenticação/autorização aos endpoints de Cinema