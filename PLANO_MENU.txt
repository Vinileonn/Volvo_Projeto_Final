═══════════════════════════════════════════════════════════════════════════════
                    PLANO DE IMPLEMENTAÇÃO DO SISTEMA DE MENU
                              SISTEMA CINEFLOW
═══════════════════════════════════════════════════════════════════════════════

DATA: 07/02/2026
OBJETIVO: Criar um sistema de menu interativo em modo console para o cinema
ARQUITETURA: A VIEW interage SOMENTE com CONTROLADORES (não com serviços)

═══════════════════════════════════════════════════════════════════════════════
1. ESTRUTURA GERAL DO SISTEMA
═══════════════════════════════════════════════════════════════════════════════

1.1 HIERARQUIA DE MENUS
   ┌─────────────────────────┐
   │    MENU PRINCIPAL       │  (Usuário não autenticado)
   └─────────────────────────┘
              │
              ├──> Login Cliente ──> MENU CLIENTE
              │
              ├──> Login Admin   ──> MENU ADMIN
              │
              └──> Cadastro      ──> MENU PRINCIPAL

1.2 FLUXO DE NAVEGAÇÃO
   - Usuário NÃO CADASTRADO: Pode navegar no menu principal e adicionar produtos
                              ao carrinho, mas NÃO pode finalizar compra
   - Usuário CLIENTE: Acessa menu cliente após login, pode finalizar compras
   - Usuário ADMIN: Acessa menu admin após login, tem acesso a todos os CRUDs


═══════════════════════════════════════════════════════════════════════════════
2. MENU PRINCIPAL (Usuário não autenticado)
═══════════════════════════════════════════════════════════════════════════════

CONTROLADORES UTILIZADOS:
   - ClienteControlador
   - AutenticacaoControlador
   - ProdutoControlador

OPÇÕES DO MENU:

2.1 VISUALIZAR CARTAZ DE FILMES
    Método: ClienteControlador.ListarCartaz()
    Exibição: Lista todos os filmes disponíveis com informações básicas
    
2.2 VISUALIZAR SESSÕES DISPONÍVEIS
    Submenu:
       a) Ver todas as sessões: ClienteControlador.ListarTodasSessoes()
       b) Ver sessões por filme: ClienteControlador.ListarSessoesPorFilme(filmeId)
    
2.3 VISUALIZAR PRODUTOS/COMBOS
    Método: ClienteControlador.ListarProdutosAlimento()
    Exibição: Lista todos os produtos com nome, descrição, preço e disponibilidade
    
2.4 ADICIONAR PRODUTO AO CARRINHO
    Fluxo:
       1. Listar produtos disponíveis
       2. Usuário escolhe produto e quantidade
       3. Armazenar em variável temporária (carrinho temporário)
    NOTA: NÃO finaliza compra - apenas armazena localmente
    IMPORTANTE: Cliente NÃO CADASTRADO pode fazer isso!
    
2.5 VER CARRINHO TEMPORÁRIO
    Exibição: Lista itens no carrinho temporário
    Cálculo: Calcular total localmente
    NOTA: Informa que precisa fazer login/cadastro para finalizar
    
2.6 FAZER LOGIN
    Método: AutenticacaoControlador.Autenticar(email, senha)
    Fluxo:
       1. Solicitar email e senha
       2. Autenticar
       3. Verificar tipo de usuário (Cliente ou Administrador)
       4. Redirecionar para menu apropriado (Cliente ou Admin)
       5. Transferir carrinho temporário se houver
    
2.7 CADASTRAR-SE (Novo Cliente)
    Método: AutenticacaoControlador.RegistrarCliente(cliente)
    Dados necessários:
       - Nome, Email, Senha, CPF, Telefone, Endereço, Data de Nascimento
    Após cadastro: Fazer login automático ou solicitar login
    
2.8 SAIR
    Encerrar aplicação


═══════════════════════════════════════════════════════════════════════════════
3. MENU CLIENTE (Usuário autenticado como Cliente)
═══════════════════════════════════════════════════════════════════════════════

CONTROLADORES UTILIZADOS:
   - ClienteControlador
   - PedidoControlador
   - AutenticacaoControlador

CONTEXTO: Armazena o objeto Cliente logado na memória

OPÇÕES DO MENU:

3.1 VISUALIZAR CARTAZ
    Método: ClienteControlador.ListarCartaz()
    
3.2 VISUALIZAR SESSÕES
    Submenu:
       a) Ver todas: ClienteControlador.ListarTodasSessoes()
       b) Por filme: ClienteControlador.ListarSessoesPorFilme(filmeId)
    
3.3 COMPRAR INGRESSO
    Submenu:
       a) Ingresso Inteiro
          Fluxo:
             1. Listar sessões disponíveis
             2. Cliente escolhe sessão
             3. Mostrar mapa de assentos (exibir ocupados/disponíveis)
             4. Cliente escolhe assento (fila + número)
             5. Cliente escolhe forma de pagamento
             6. Se dinheiro, solicitar valor pago
             7. Método: ClienteControlador.ComprarIngressoInteiro(sessao, cliente, fila, numero, formaPagamento, valorPago)
             8. Exibir confirmação e troco (se aplicável)
       
       b) Ingresso Meia
          Fluxo:
             1-5. Igual ao ingresso inteiro
             6. Solicitar motivo da meia-entrada
             7. Cliente escolhe forma de pagamento
             8. Se dinheiro, solicitar valor pago
             9. Método: ClienteControlador.ComprarIngressoMeia(sessao, cliente, fila, numero, motivo, formaPagamento, valorPago)
             10. Exibir confirmação e troco (se aplicável)
    
3.4 VISUALIZAR MEUS INGRESSOS
    Método: ClienteControlador.ListarIngressosDoCliente(cliente)
    Exibição: Lista com filme, sessão, assento, data/hora, preço
    
3.5 GERENCIAR CARRINHO DE PRODUTOS
    Submenu:
       a) Ver produtos disponíveis
          Método: ClienteControlador.ListarProdutosAlimento()
       
       b) Criar novo pedido
          Método: ClienteControlador.CriarPedidoAlimento(cliente)
          NOTA: Cria um pedido vazio e retorna o ID
       
       c) Adicionar item ao pedido
          Método: ClienteControlador.AdicionarItemAoPedido(pedidoId, produtoId, quantidade)
          Fluxo:
             1. Verificar se tem pedido ativo/aberto
             2. Se não, criar novo pedido
             3. Listar produtos
             4. Cliente escolhe produto e quantidade
             5. Adicionar ao pedido
       
       d) Ver meu carrinho/pedido atual
          Método: ClienteControlador.ObterPedido(pedidoId)
          Exibição: Lista itens com nome, quantidade, subtotal
          Calcular: ClienteControlador.CalcularTotalPedido(pedidoId)
       
       e) Remover item do pedido
          Método: ClienteControlador.RemoverItemDoPedido(pedidoId, itemId)
       
       f) Finalizar pedido (EFETIVAÇÃO DA COMPRA)
          Método: PedidoControlador.RegistrarPagamento(pedidoId, formaPagamento, valorPago)
          Fluxo:
             1. Mostrar resumo do pedido e total
             2. Escolher forma de pagamento
             3. Se dinheiro, solicitar valor pago
             4. Registrar pagamento
             5. Exibir confirmação e troco (se aplicável)
    
3.6 VER HISTÓRICO DE PEDIDOS
    Método: ClienteControlador.ListarPedidos()
    Exibição: Lista todos os pedidos do cliente (abertos e finalizados)
    
3.7 ALTERAR SENHA
    Método: AutenticacaoControlador.AlterarSenha(usuarioId, senhaAtual, senhaNova)
    
3.8 LOGOUT
    Limpar dados do cliente logado
    Voltar ao Menu Principal


═══════════════════════════════════════════════════════════════════════════════
4. MENU ADMIN (Usuário autenticado como Administrador)
═══════════════════════════════════════════════════════════════════════════════

CONTROLADORES UTILIZADOS:
   - AdministradorControlador (agrega todos os outros controladores)
   - AutenticacaoControlador

CREDENCIAIS PADRÃO:
   Email: Administrador@cinema.com
   Senha: administrador123

ESTRUTURA DO MENU:

4.1 GESTÃO DE FILMES
    Controlador: AdministradorControlador.FilmeControlador
    
    a) Criar Filme
       Método: FilmeControlador.CriarFilme(filme)
       Dados: Título, Duração, Gênero, Classificação, Sinopse, Diretor
    
    b) Listar Filmes
       Método: FilmeControlador.ListarFilmes()
    
    c) Buscar Filme por Título
       Método: FilmeControlador.BuscarPorTitulo(titulo)
    
    d) Obter Detalhes de Filme
       Método: FilmeControlador.ObterFilme(id)
    
    e) Atualizar Filme
       Método: FilmeControlador.AtualizarFilme(id, parametros)
       Parâmetros opcionais: titulo, duracao, genero, classificacao, sinopse, diretor
    
    f) Deletar Filme
       Método: FilmeControlador.DeletarFilme(id)

4.2 GESTÃO DE SALAS
    Controlador: AdministradorControlador.SalaControlador
    
    a) Criar Sala
       Método: SalaControlador.CriarSala(sala)
       Dados: Nome, Capacidade, Cinema, Tipo
    
    b) Listar Salas
       Métodos:
          - SalaControlador.ListarSalas() (todas)
          - SalaControlador.ListarSalasPorCinema(cinemaId) (por cinema)
    
    c) Obter Detalhes de Sala
       Método: SalaControlador.ObterSala(id)
    
    d) Gerar Assentos para Sala
       Método: SalaControlador.GerarAssentosParaSala(id)
       NOTA: Cria automaticamente os assentos baseado na capacidade
    
    e) Atualizar Sala
       Método: SalaControlador.AtualizarSala(id, parametros)
       Parâmetros opcionais: nome, capacidade, cinema, tipo
    
    f) Deletar Sala
       Método: SalaControlador.DeletarSala(id)

4.3 GESTÃO DE SESSÕES
    Controlador: AdministradorControlador.SessaoControlador
    
    a) Criar Sessão
       Método: SessaoControlador.CriarSessao(sessao)
       Dados: Filme, Sala, Data/Horário, Preço Base
       VALIDAÇÃO: Verificar conflitos de horário na sala
    
    b) Listar Sessões
       Métodos:
          - SessaoControlador.ListarSessoes() (todas)
          - SessaoControlador.ListarSessoesPorFilme(filmeId)
          - SessaoControlador.ListarSessoesPorSala(salaId)
    
    c) Obter Detalhes de Sessão
       Método: SessaoControlador.ObterSessao(id)
    
    d) Atualizar Sessão
       Método: SessaoControlador.AtualizarSessao(id, parametros)
       Parâmetros opcionais: dataHorario, precoBase, filme, sala
    
    e) Deletar Sessão
       Método: SessaoControlador.DeletarSessao(id)

4.4 GESTÃO DE PRODUTOS
    Controlador: AdministradorControlador.ProdutoControlador
    
    a) Criar Produto
       Método: ProdutoControlador.CriarProduto(produto)
       Dados: Nome, Descrição, Preço, Estoque Inicial, Categoria
    
    b) Listar Produtos
       Métodos:
          - ProdutoControlador.ListarProdutos() (todos)
          - ProdutoControlador.ListarProdutosEstoqueBaixo() (alerta de estoque)
    
    c) Buscar Produto por Nome
       Método: ProdutoControlador.BuscarPorNome(nome)
    
    d) Obter Detalhes de Produto
       Método: ProdutoControlador.ObterProduto(id)
    
    e) Atualizar Produto
       Método: ProdutoControlador.AtualizarProduto(id, parametros)
       Parâmetros opcionais: nome, descricao, preco, categoria
    
    f) Gerenciar Estoque
       Métodos:
          - ProdutoControlador.AdicionarEstoque(id, quantidade)
          - ProdutoControlador.ReduzirEstoque(id, quantidade)
          - ProdutoControlador.VerificarDisponibilidade(id, quantidade)
    
    g) Deletar Produto
       Método: ProdutoControlador.DeletarProduto(id)

4.5 GESTÃO DE PEDIDOS
    Controlador: AdministradorControlador.PedidoControlador
    
    a) Listar Todos os Pedidos
       Método: PedidoControlador.ListarPedidos()
    
    b) Obter Detalhes de Pedido
       Método: PedidoControlador.ObterPedido(id)
    
    c) Cancelar Pedido
       Método: PedidoControlador.CancelarPedido(id)
    
    d) Calcular Total de Pedido
       Método: PedidoControlador.CalcularTotal(pedidoId)

4.6 GESTÃO DE CINEMAS
    Controlador: AdministradorControlador.CinemaControlador
    
    a) Criar Cinema
       Método: CinemaControlador.CriarCinema(cinema)
       Dados: Nome, Endereço
    
    b) Listar Cinemas
       Método: CinemaControlador.ListarCinemas()
    
    c) Obter Detalhes de Cinema
       Método: CinemaControlador.ObterCinema(id)
    
    d) Atualizar Cinema
       Método: CinemaControlador.AtualizarCinema(id, parametros)
       Parâmetros opcionais: nome, endereco
    
    e) Deletar Cinema
       Método: CinemaControlador.DeletarCinema(id)

4.7 GESTÃO DE FUNCIONÁRIOS
    Controlador: AdministradorControlador.FuncionarioControlador
    
    a) Criar Funcionário
       Método: FuncionarioControlador.CriarFuncionario(funcionario)
       Dados: Nome, Cargo, Cinema, Salário
    
    b) Listar Funcionários
       Métodos:
          - FuncionarioControlador.ListarFuncionarios() (todos)
          - FuncionarioControlador.ListarPorCargo(cargo)
          - FuncionarioControlador.ListarPorCinema(cinemaId)
    
    c) Obter Detalhes de Funcionário
       Método: FuncionarioControlador.ObterFuncionario(id)
    
    d) Atualizar Funcionário
       Método: FuncionarioControlador.AtualizarFuncionario(id, parametros)
       Parâmetros opcionais: nome, cargo, cinema
    
    e) Deletar Funcionário
       Método: FuncionarioControlador.DeletarFuncionario(id)

4.8 GESTÃO DE ESCALAS DE LIMPEZA
    Controlador: AdministradorControlador.LimpezaControlador
    
    a) Criar Escala
       Método: LimpezaControlador.CriarEscala(sala, funcionario, inicio, fim)
    
    b) Listar Escalas
       Métodos:
          - LimpezaControlador.ListarEscalas() (todas)
          - LimpezaControlador.ListarPorSala(salaId)
          - LimpezaControlador.ListarPorFuncionario(funcionarioId)
    
    c) Deletar Escala
       Método: LimpezaControlador.DeletarEscala(id)

4.9 RELATÓRIOS E ESTATÍSTICAS
    Controlador: AdministradorControlador.RelatorioControlador
    
    a) Relatório de Ingressos
       Métodos:
          - RelatorioControlador.TotalIngressosVendidos()
          - RelatorioControlador.ReceitaTotalIngressos()
          - RelatorioControlador.IngressosPorFilme()
    
    b) Relatório de Sessões
       Método: RelatorioControlador.SessoesComMaiorOcupacao(top)
    
    c) Relatório de Produtos/Pedidos
       Métodos:
          - RelatorioControlador.ReceitaTotalPedidos()
          - RelatorioControlador.ProdutosMaisVendidos()
          - RelatorioControlador.ProdutosEstoqueBaixo()
    
    d) Relatório Geral
       Métodos:
          - RelatorioControlador.ReceitaTotalGeral()
          - RelatorioControlador.VendasPorPeriodo(inicio, fim)
          - RelatorioControlador.TaxaOcupacaoMedia()

4.10 ALTERAR SENHA
     Método: AutenticacaoControlador.AlterarSenha(usuarioId, senhaAtual, senhaNova)

4.11 LOGOUT
     Limpar dados do admin logado
     Voltar ao Menu Principal


═══════════════════════════════════════════════════════════════════════════════
5. ESTRUTURA DE IMPLEMENTAÇÃO
═══════════════════════════════════════════════════════════════════════════════

5.1 ARQUIVOS A CRIAR

   a) Program.cs (arquivo principal)
      - Inicialização da aplicação
      - Instanciação de serviços e controladores
      - Loop principal do menu
   
   b) MenuPrincipal.cs (classe de view)
      - Métodos para exibir e navegar no menu principal
      - Interação com controladores
   
   c) MenuCliente.cs (classe de view)
      - Métodos para exibir e navegar no menu cliente
      - Interação com controladores
   
   d) MenuAdmin.cs (classe de view)
      - Métodos para exibir e navegar no menu admin
      - Interação com controladores
   
   e) MenuHelper.cs (classe utilitária)
      - Métodos auxiliares para formatação de menus
      - Validação de entrada do usuário
      - Exibição de mensagens padronizadas

5.2 INICIALIZAÇÃO DOS CONTROLADORES (Program.cs)

   Ordem de instanciação:
   
   1. Instanciar SERVIÇOS:
      - CinemaServico
      - FilmeServico
      - SalaServico
      - SessaoServico
      - ProdutoAlimentoServico
      - PedidoAlimentoServico
      - IngressoServico
      - UsuarioServico
      - AutenticacaoServico
      - FuncionarioServico
      - LimpezaServico
      - RelatorioServico
   
   2. Instanciar CONTROLADORES:
      - FilmeControlador
      - SalaControlador
      - SessaoControlador
      - ProdutoControlador
      - PedidoControlador
      - CinemaControlador
      - FuncionarioControlador
      - LimpezaControlador
      - RelatorioControlador
      - ClienteControlador
      - AutenticacaoControlador
      - AdministradorControlador (agrega os outros)
   
   3. Inicializar MENUS:
      - MenuPrincipal
      - MenuCliente
      - MenuAdmin

5.3 FLUXO DE EXECUÇÃO

   ┌─────────────────────────┐
   │   Iniciar Aplicação     │
   └──────────┬──────────────┘
              │
              ▼
   ┌─────────────────────────┐
   │  Instanciar Serviços    │
   └──────────┬──────────────┘
              │
              ▼
   ┌─────────────────────────┐
   │ Instanciar Controladores│
   └──────────┬──────────────┘
              │
              ▼
   ┌─────────────────────────┐
   │   Exibir Menu Principal │◄──────────┐
   └──────────┬──────────────┘           │
              │                           │
              ├─► Login Cliente ──► Menu Cliente ─┤
              │                           │       │
              ├─► Login Admin ────► Menu Admin ───┤
              │                                    │
              ├─► Cadastro ────────────────────────┤
              │                                    │
              ├─► Outras Opções ───────────────────┘
              │
              ▼
   ┌─────────────────────────┐
   │        Sair             │
   └─────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════
6. REGRAS DE NEGÓCIO E VALIDAÇÕES
═══════════════════════════════════════════════════════════════════════════════

6.1 CARRINHO TEMPORÁRIO (Usuário não cadastrado)
   - Armazenado em memória local (variável na view)
   - Não persiste no banco/serviço
   - Ao fazer login: transferir itens para pedido real do cliente
   - Ao cadastrar: pode transferir ou descartar
   - Permite adicionar/remover produtos

6.2 COMPRA DE INGRESSOS
   - Apenas clientes CADASTRADOS e LOGADOS
   - Validar disponibilidade do assento
   - Validar sessão ativa
   - Suportar múltiplas formas de pagamento
   - Calcular troco quando pagamento em dinheiro

6.3 FINALIZAÇÃO DE PEDIDOS
   - Apenas clientes CADASTRADOS e LOGADOS
   - Validar estoque de produtos
   - Registrar forma de pagamento
   - Atualizar estoque após finalização
   - Calcular troco quando pagamento em dinheiro

6.4 ADMIN - CRIAÇÃO DE SESSÃO
   - Validar conflitos de horário na sala
   - Validar existência de filme e sala
   - Validar data/hora não seja no passado

6.5 ADMIN - GESTÃO DE ESTOQUE
   - Alertar quando estoque baixo
   - Impedir redução abaixo de zero
   - Validar quantidade positiva


═══════════════════════════════════════════════════════════════════════════════
7. FORMATAÇÃO E EXPERIÊNCIA DO USUÁRIO
═══════════════════════════════════════════════════════════════════════════════

7.1 PADRÃO DE MENUS
   ═══════════════════════════════════════
   NOME DO MENU
   ═══════════════════════════════════════
   1. Opção 1
   2. Opção 2
   3. Opção 3
   ...
   0. Voltar/Sair
   ═══════════════════════════════════════
   Escolha uma opção:

7.2 EXIBIÇÃO DE LISTAS
   - Usar tabelas formatadas
   - Mostrar informações relevantes
   - Limitar quantidade de itens por página (opcional)
   - Incluir numeração para facilitar seleção

7.3 CONFIRMAÇÕES
   - Sempre confirmar operações destrutivas (DELETE)
   - Mostrar resumo antes de finalizar compras
   - Exibir mensagens de sucesso/erro claramente

7.4 NAVEGAÇÃO
   - Opção 0 sempre para voltar/sair
   - Breadcrumb no topo do menu (ex: Admin > Filmes > Criar)
   - Limpar console entre navegações para melhor visualização

7.5 TRATAMENTO DE ERROS
   - Capturar exceções dos controladores
   - Exibir mensagens amigáveis ao usuário
   - Permitir tentar novamente ou voltar ao menu


═══════════════════════════════════════════════════════════════════════════════
8. DADOS DE TESTE/INICIALIZAÇÃO
═══════════════════════════════════════════════════════════════════════════════

8.1 CRIAR DADOS INICIAIS (Opcional, mas recomendado)
   
   a) Administrador padrão:
      Email: Administrador@cinema.com
      Senha: administrador123
   
   b) Cinema exemplo:
      Nome: "CineFlow Plaza"
      Endereço: "Av. Principal, 123"
   
   c) Salas exemplo:
      - Sala 1 (50 lugares, Convencional)
      - Sala 2 (80 lugares, 3D)
      - Sala 3 (120 lugares, IMAX)
   
   d) Filmes exemplo:
      - 3-5 filmes com dados completos
   
   e) Produtos exemplo:
      - Pipoca Pequena/Média/Grande
      - Refrigerante Pequeno/Médio/Grande
      - Combos (Pipoca + Refri)
      - Doces variados
   
   f) Sessões exemplo:
      - Programação para os próximos 7 dias
      - Diferentes horários e filmes


═══════════════════════════════════════════════════════════════════════════════
9. CHECKLIST DE IMPLEMENTAÇÃO
═══════════════════════════════════════════════════════════════════════════════

FASE 1 - ESTRUTURA BASE
x Criar MenuHelper.cs com métodos utilitários
x Implementar inicialização de serviços em Program.cs
x Implementar inicialização de controladores em Program.cs
x Criar dados de teste iniciais

FASE 2 - MENU PRINCIPAL
x
x Implementar MenuPrincipal.cs
x Visualizar cartaz
x Visualizar sessões
x Visualizar produtos
x Adicionar ao carrinho temporário
x Ver carrinho temporário
x Login (cliente/admin)
x Cadastro de cliente

FASE 3 - MENU CLIENTE
☐ Implementar MenuCliente.cs
☐ Transferir carrinho temporário ao logar
☐ Comprar ingressos (inteira/meia)
☐ Gerenciar pedidos/carrinho
☐ Finalizar compra de produtos
☐ Ver histórico de ingressos e pedidos
☐ Alterar senha
☐ Logout

FASE 4 - MENU ADMIN
☐ Implementar MenuAdmin.cs
☐ CRUD Filmes
☐ CRUD Salas
☐ CRUD Sessões
☐ CRUD Produtos
☐ CRUD Cinemas
☐ CRUD Funcionários
☐ CRUD Escalas de Limpeza
☐ Gestão de Pedidos
☐ Relatórios e Estatísticas
☐ Alterar senha
☐ Logout

FASE 5 - REFINAMENTO
☐ Testar todos os fluxos
☐ Validar tratamento de exceções
☐ Melhorar formatação e UX
☐ Adicionar confirmações onde necessário
☐ Testar edge cases
☐ Documentar código


═══════════════════════════════════════════════════════════════════════════════
10. OBSERVAÇÕES IMPORTANTES
═══════════════════════════════════════════════════════════════════════════════

✓ A VIEW interage APENAS com CONTROLADORES
✓ Não chamar serviços diretamente da view
✓ Controladores retornam tuplas (resultado, mensagem)
✓ Sempre tratar e exibir as mensagens dos controladores
✓ Manter estado do usuário logado (Cliente ou Admin)
✓ Carrinho temporário é local à view, não persiste
✓ Apenas clientes logados podem finalizar compras
✓ Admin tem credenciais fixas definidas em Administrador.cs
✓ Usar enumerações para categorias, cargos, tipos, etc.
✓ Implementar navegação intuitiva com opção de voltar
✓ Validar entradas do usuário antes de chamar controladores

═══════════════════════════════════════════════════════════════════════════════
FIM DO PLANO DE IMPLEMENTAÇÃO
═══════════════════════════════════════════════════════════════════════════════
